<section>
  <h2 class="text-2xl font-bold mt-6 mb-4">Profile Widgets</h2>

  <p class="text-gray-600 mb-6">
    Choose which widgets to display on your profile page.
  </p>

  <%# Enabled Widgets %>
  <div class="mb-8">
    <h3 class="text-lg font-semibold mb-3">Enabled Widgets</h3>

    <div id="profile-widgets-list" class="space-y-2 mb-4">
      <% if @profile_widgets.any? %>
        <% @profile_widgets.each_with_index do |widget, index| %>
          <%= render "profile_widget", profile_widget: widget, is_first: index == 0, is_last: index == @profile_widgets.size - 1 %>
        <% end %>
      <% else %>
        <p class="text-gray-500">No widgets enabled yet.</p>
      <% end %>
    </div>
  </div>

  <%# Add Widget %>
  <% if @available_widget_types.any? %>
    <div>
      <h3 class="text-lg font-semibold mb-3">Add Widget</h3>

      <%= form_with url: my_profile_widgets_path, scope: :profile_widget, class: "flex gap-2 items-center" do |f| %>
        <%= f.select :widget_type, @available_widget_types.map { |t| [t.titleize, t] }, {}, class: "px-3 py-2 border border-gray-300 rounded" %>
        <%= f.submit "Add", class: "px-4 py-2 border border-slate-500 rounded-xs bg-slate-100 hover:bg-slate-200 cursor-pointer" %>
      <% end %>
    </div>
  <% end %>
</section>
