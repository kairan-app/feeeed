<section class="mb-12">
  <div class="profile flex flex-col items-center py-8">
    <div class="profile-image w-24 h-24 md:w-32 md:h-32 mb-4 [&_img]:w-full [&_img]:h-full [&_img]:object-cover [&_img]:rounded-full">
      <%= user_avatar_tag(@user, size: :thumb) %>
    </div>
    <div class="profile-info text-center">
      <h2 class="text-2xl md:text-3xl font-bold"><%= "@" + @user.name %></h2>
      <p class="mt-2 text-gray-600 text-sm">
        <%= pluralize(@user.owned_channels.count, "owned channel") %>,
        <%= pluralize(@user.subscribed_channels.count, "subscription") %>,
        <%= pluralize(@user.pawprints.count, "pawprint") %>
      </p>
      <% if logged_in? && current_user == @user %>
        <p class="mt-3">
          <%= link_to my_profile_widgets_path, class: "inline-flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700" do %>
            <span class="material-symbols-outlined text-base">edit</span>
            Edit Widgets
          <% end %>
        </p>
      <% end %>
    </div>
  </div>
</section>

<% @profile_widgets.each do |widget| %>
  <%= render "user_profile_widgets/#{widget.widget_type}", user: @user %>
<% end %>
