# レイアウト刷新

## 背景

旧レイアウトはheader/footer/メインコンテンツの縦積み構成だった。
header/footerにあった要素を左サイドバーに集約し、右のメイン領域にページコンテンツを表示する構成に刷新する。

## 旧レイアウト

```
┌─── Header (72px) ──────────────────────────────────┐
│  Logo │ Search │ Pawprints │ Unreads │ Settings │ 🍔 │
├────────────────────────────────────────────────────┤
│              メインコンテンツ (max-w: 1440px)         │
├─── Footer ─────────────────────────────────────────┤
│  About · Channels · Items · Groups · Terms · Privacy │
└────────────────────────────────────────────────────┘
  + モバイル: ボトムタブバー (Home / Pawprints / Unreads / Settings)
  + モバイル: ハンバーガーメニュー
```

## 新レイアウト

### デスクトップ (md以上)

左に固定幅サイドバー (w-60 = 240px)、右にメイン領域。header/footerは廃止。

```
┌─ Sidebar (w-60, fixed) ──┬─── Main (ml-60) ────────┐
│ Logo                     │                          │
│ Search                   │  メインコンテンツ          │
│                          │                          │
│ Home                     │                          │
│ Pawprints                │                          │
│ Unreads                  │                          │
│ Settings                 │                          │
│ ─────────                │                          │
│ Guides                   │                          │
│ Subscriptions            │                          │
│ My Page                  │                          │
│ ─────────                │                          │
│ Channels / Items / Groups│                          │
│ ─────────                │                          │
│ About · Terms · Privacy  │                          │
│ User info + Logout       │                          │
│ © rururu                 │                          │
└──────────────────────────┴──────────────────────────┘
```

### モバイル (md未満)

上にミニヘッダー、下にボトムタブ。サイドバーは非表示。

```
┌─ Header (h-14) ──────────────────┐
│ Logo                  User Icon  │
├──────────────────────────────────┤
│                                  │
│         メインコンテンツ           │
│                                  │
├─ Bottom Tab (h-16) ──────────────┤
│ Home | Pawprints | Unreads | More│
└──────────────────────────────────┘
```

- **More** (`grid_view`アイコン) をタップするとAndroid Share風の**ボトムシート**が出る
- ボトムシートの中身は4列アイコングリッドで、Channels / Items / Groups / Guides / Settings / Subscriptions / My Page / About / Terms / Privacy / Log out などを配置
- ボトムシートの下部にはSearch Channelsフォームも配置
- オーバーレイ付きで、外側タップで閉じる

## ファイル構成

### 新規作成

| ファイル | 役割 |
|---|---|
| `app/views/layouts/_sidebar.html.erb` | デスクトップ用サイドバー |
| `app/views/layouts/_mobile_header.html.erb` | モバイル用ヘッダー（ロゴ + ユーザーアイコン） |
| `app/views/layouts/_mobile_bottom_tab.html.erb` | モバイル用ボトムタブ |
| `app/views/layouts/_bottom_sheet.html.erb` | Moreタップで出るボトムシート |
| `app/javascript/controllers/bottom_sheet_controller.js` | ボトムシートの開閉を制御するStimulusコントローラー |

### 変更

| ファイル | 変更内容 |
|---|---|
| `app/views/layouts/application.html.erb` | header/footer構造 → サイドバー+メインの2カラム構造 |
| 各ページのview | 先頭要素の上マージンを `mt-4` に統一 |

### 未使用になったファイル

| ファイル | 備考 |
|---|---|
| `app/views/layouts/_menu.html.erb` | 旧header用ナビ。どこからも参照されなくなった。削除可。 |

## 技術的なポイント

- ボトムタブとボトムシートは `application.html.erb` で `<div class="md:hidden" data-controller="bottom-sheet">` にまとめて、Stimulusコントローラーのスコープ内にターゲットが収まるようにしている
- サイドバー・ボトムシートの検索フォームでは `@channel_q || Channel.ransack` でnilに対応
- チャンネル登録FABの位置 (`max-md:bottom-20`) はボトムタブ (h-16) とのクリアランスとして問題なし
